import {create} from 'zustand';

const API_URL = 'http://localhost:8000/user';

export const useAuthStore = create((set) => ({
    user : null,
    isLoading: false,
    error : null,
    message : null,
    isCheakingAuth : true,
    isAuthenticated: false,
    logout : async () => {
        set({isLoading: true,error: null});
        try {
            const response = await fetch(`${API_URL}/logout`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                credentials: 'include',
            });
            const data = await response.json();
            console.log("data ",data);
            set({isLoading: false, user: null, isAuthenticated: false});
        } catch (error) {
            set({isLoading: false, error: error.message});
            console.error(error.message);
            throw error;
        }
    },
}));